---
import Badge from "@/components/Badge.astro"
import Figma from "@/icons/Figma.astro"
import FullScreenSection from "@/components/FullScreenSection.astro"
import GitHub from "@/icons/GitHub.astro"
import { Image } from "astro:assets"
import Link from "@/components/links/Link.astro"
import LinkWithIcon from "../links/LinkWithIcon.astro"
import List from "@/components/List.astro"
import SectionTitle from "@/components/SectionTitle.astro"
import Web from "@/icons/Web.astro"
import ecotideImg from "@/assets/images/projects/ecotide.png"
import nourishImg from "@/assets/images/projects/nourish.png"

type Project = {
  name: string
  description: string[]
  link: string
  repo?: string
  design?: string
  image: ImageMetadata
  tech: string[]
}

const PROJECTS: Project[] = [
  {
    name: "Ecotide",
    description: [
      "Web platform where you can explore detailed information about the ocean, phytoplankton species, and the difference between ocean gardens and land gardens, featuring visually stunning imagery for viewers and immersive ocean sounds.",
      "Participated in the 2023 NASA International Space Apps Challenge at the Universidad AeronÃ¡utica en QuerÃ©taro (UNAQ). We were honored to be finalists in the social challenges track, which allowed us to share our vision and mission in front of an audience of over 50 people.",
    ],
    link: "https://nasa-space-apps.vercel.app/",
    repo: "https://github.com/alancasre133/Nasaoceangarden",
    design:
      "https://www.figma.com/file/lJEAo2G5GX0BAvf6KCCiyw/Ocean-Garden?type=design&node-id=0%3A1&mode=design&t=cuR1el7ELUlnsuQa-1",
    image: ecotideImg,
    tech: ["Next.js", "Tailwind CSS", "TypeScript", "<model-viewer>"],
  },
  {
    name: "Nourish",
    description: [
      "Mobile-first web application designed to tackle food insecurity by offering personalized menus and recipes tailored to students' nutritional needs.",
      "Created during the WaffleHacks 2023 hackathon, this project was the result of collaboration with an exceptional, multidisciplinary team. We partnered with Aura Daniela LÃ³pez GarduÃ±o, a nutritionist holding a degree from the University of Guanajuato (UGTO).",
    ],
    link: "https://nourish.jacobflores.dev/",
    repo: "https://github.com/GerardoPrz/WaffleHacks-FoodInsecurity",
    design: "https://www.figma.com/file/rMtbBlgfmWpBIcp2x4LduD/Food-Insecurity",
    image: nourishImg,
    tech: ["Next.js", "Tailwind CSS", "Firebase", "OpenAI API"],
  },
]

type ProjectLink = {
  icon: (_props: Record<string, any>) => any
  href?: string
  text: string
}
const getProjectLinks = ({ link, repo, design }: Project): ProjectLink[] => {
  return [
    {
      icon: Web,
      href: link,
      text: "Project",
    },
    {
      icon: Figma,
      href: design,
      text: "Design",
    },
    {
      icon: GitHub,
      href: repo,
      text: "Code",
    },
  ]
}
---

<FullScreenSection id="projects" class="max-w-7xl">
  <SectionTitle class="text-center">Projects ðŸª„</SectionTitle>

  <div class="flex flex-col gap-12">
    {
      PROJECTS.map((project) => {
        const { name, description, link, image, tech } = project
        return (
          <article class="flex w-full flex-col gap-4 rounded-xl border-blue-500 from-transparent via-blue-700/10 via-40% to-blue-700/30 duration-200 hover:border-blue-300 md:gap-8 md:border-4 md:bg-gradient-to-tr md:p-4 md:transition-all md:hover:scale-105 lg:grid lg:grid-cols-2 lg:p-8">
            <section class="flex flex-col gap-4">
              <header>
                <h3 class="mb-2 text-4xl font-semibold">{name}</h3>
                <div class="flex flex-col gap-2 text-lg text-slate-400 [text-wrap:balance]">
                  {description.map((text) => (
                    <p>{text}</p>
                  ))}
                </div>
              </header>
              <div class="flex flex-wrap gap-x-6 gap-y-1">
                {getProjectLinks(project).map(
                  ({ icon: Icon, href, text }) =>
                    href && (
                      <LinkWithIcon href={href}>
                        <Icon /> {text}
                      </LinkWithIcon>
                    ),
                )}
              </div>
              <List>
                {tech.map((tech) => (
                  <Badge>{tech}</Badge>
                ))}
              </List>
            </section>
            <Link href={link}>
              <Image
                class="h-full w-full rounded-lg object-cover object-top"
                src={image}
                alt={`${name} Preview`}
              />
            </Link>
          </article>
        )
      })
    }
  </div>
</FullScreenSection>
